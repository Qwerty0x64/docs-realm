.. _ios-realm-database-writes:

======
Writes
======

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

.. include:: /client-guides/crud/writes/overview.rst

.. _ios-acid-compliance:

Realm is ACID Compliant
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/acid-compliance.rst

.. _ios-open-a-transaction:

Run a Transaction
-----------------

.. include:: /client-guides/crud/writes/open-a-transaction.rst

.. example::

   The following code shows how to run a transaction with
   the {+realm+}'s write method. If the code in the callback
   throws an exception, {+client-database+} cancels the transaction.
   Otherwise, {+client-database+} commits the transaction.

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/Transaction.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/Transaction.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-create-an-object:

Create an Object
----------------

.. include:: /client-guides/crud/writes/create-an-object.rst

.. example::

   This code demonstrates how to create an object with {+client-database+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/Create.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/Create.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-upsert:

Upsert an Object
~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/upsert.rst

.. example::

   This code demonstrates how to upsert an object with
   {+realm+}. We create a new user named "Drew" and then update
   their name to "Andy" via upsert:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/Upsert.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/Upsert.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-update:

Update an Object
----------------

.. include:: /client-guides/crud/writes/update.rst

.. example::

   This code changes the dog's name to "Wolfie" and
   increments the age by 1:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/Update.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/Update.swift
            :language: swift
            :emphasize-lines: 5, 15


.. _ios-batch-update:

Update a Collection
~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/batch-update.rst

.. example::

   The following code demonstrates how to update a
   collection. Thanks to the :ref:`implicit inverse
   relationship <inverse-relationship>` between the Dog's
   ``owner`` property and the Person's ``dogs`` property,
   {+client-database+} automatically updates Ali's list of dogs.

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/BatchUpdate.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/BatchUpdate.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-delete:

Delete an Object
----------------

.. include:: /client-guides/crud/writes/delete.rst

.. example::

   The following code shows how to delete one object from its {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/Delete.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/Delete.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-delete-collection:

Delete a Collection
~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/delete-collection.rst

.. example::

   The following code demonstrates how to delete a collection from a {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/DeleteCollection.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/DeleteCollection.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-cascading-delete:

Cascading Delete
~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/cascading-delete.rst

.. example::

   The following code demonstrates how to perform a cascading delete by first
   deleting all of Ali's dogs, then deleting Ali:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/CascadingDelete.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/CascadingDelete.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-delete-all-of-object:

Delete All Instances of a Type
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/delete-all-of-object.rst

.. example::

   The following code demonstrates how to delete all
   Dog instances from a {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/DeleteAllOfClass.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/DeleteAllOfClass.swift
            :language: swift
            :emphasize-lines: 5, 15

.. _ios-delete-all:

Delete Everything
~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/delete-all.rst

.. example::

   The following code demonstrates how to delete everything
   from a {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: objective-c
   
         .. literalinclude:: /examples/CRUD/DeleteAll.m
            :language: objective-c
            :emphasize-lines: 5, 10
   
      .. tab::
         :tabid: swift
   
         .. literalinclude:: /examples/CRUD/DeleteAll.swift
            :language: swift
            :emphasize-lines: 5, 15

Summary
-------

- {+client-database+} handles writes in terms of **transactions**. All writes must occur in a transaction.
- {+client-database+} transactions are ACID compliant.
- To write to {+client-database+}, define the transaction in a callback function that you pass to the {+realm+}'s ``write`` method.
