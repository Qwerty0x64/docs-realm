.. _android-realm-database-writes:

======
Writes
======

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 2
   :class: singlecol

Overview
--------

.. include:: /client-guides/crud/writes/overview.rst

.. _android-acid-compliance:

Realm is ACID Compliant
~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/acid-compliance.rst

.. _android-open-a-transaction:

Run a Transaction
-----------------

.. include:: /client-guides/crud/writes/open-a-transaction.rst

.. example::

   The following code shows how to run a transaction with
   the {+realm+}'s write method. If the code in the callback
   throws an exception, {+client-database+} cancels the transaction.
   Otherwise, {+client-database+} commits the transaction.

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/Transaction.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/Transaction.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-create-an-object:

Create an Object
----------------

.. include:: /client-guides/crud/writes/create-an-object.rst

.. example::

   This code demonstrates how to create an object with {+client-database+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/Create.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/Create.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-upsert:

Upsert an Object
~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/upsert.rst

.. example::

   This code demonstrates how to upsert an object with
   {+realm+}. We create a new user named "Drew" and then update
   their name to "Andy" via upsert:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/Upsert.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/Upsert.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-update:

Update an Object
----------------

.. include:: /client-guides/crud/writes/update.rst

.. example::

   This code changes the dog's name to "Wolfie" and
   increments the age by 1:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/Update.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/Update.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-batch-update:

Update a Collection
~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/batch-update.rst

.. example::

   The following code demonstrates how to update a
   collection. Thanks to the :ref:`implicit inverse
   relationship <inverse-relationship>` between the Dog's
   ``owner`` property and the Person's ``dogs`` property,
   {+client-database+} automatically updates Ali's list of dogs.

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/BatchUpdate.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/BatchUpdate.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-delete:

Delete an Object
----------------

With the Java SDK, call ``deleteFromRealm()`` on the
instance itself.

.. include:: /client-guides/crud/writes/delete.rst

.. example::

   The following code shows how to delete one object from
   its {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/Delete.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/Delete.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-delete-collection:

Delete a Collection
~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/delete-collection.rst

With the Java SDK, call ``deleteFromRealm()`` on the
collection itself.

.. example::

   The following code demonstrates how to delete a collection from a {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/DeleteCollection.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/DeleteCollection.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-cascading-delete:

Cascading Delete
~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/cascading-delete.rst

.. example::

   The following code demonstrates how to perform a cascading delete by first
   deleting all of Ali's dogs, then deleting Ali:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/CascadingDelete.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/CascadingDelete.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-delete-all-of-object:

Delete All Instances of a Type
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/delete-all-of-object.rst

.. example::

   The following code demonstrates how to delete all
   Dog instances from a {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/DeleteAllOfClass.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/DeleteAllOfClass.kt
            :language: kotlin
            :emphasize-lines: 7, 14

.. _android-delete-all:

Delete Everything
~~~~~~~~~~~~~~~~~

.. include:: /client-guides/crud/writes/delete-all.rst

.. example::

   The following code demonstrates how to delete everything
   from a {+realm+}:

   .. tabs-realm-languages::
   
      .. tab::
         :tabid: java
   
         .. literalinclude:: /examples/CRUD/DeleteAll.java
            :language: java
            :emphasize-lines: 7, 14
   
      .. tab::
         :tabid: kotlin
   
         .. literalinclude:: /examples/CRUD/DeleteAll.kt
            :language: kotlin
            :emphasize-lines: 7, 14

Summary
-------

- {+client-database+} handles writes in terms of **transactions**. All writes must occur in a transaction.
- {+client-database+} transactions are ACID compliant.
- To write to {+client-database+}, define the transaction in a callback function that you pass to the {+realm+}'s ``write`` method.
